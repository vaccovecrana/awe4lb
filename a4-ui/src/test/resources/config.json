{
  "id": "test-config-00",
  "description": "Test configuration",
  "servers": [
    {
      "id": "momo-http-json",
      "addr": {"host":"0.0.0.0", "port": 8080},
      "match": [{"discover": {"http": {"endpoint": "http://127.0.0.1:4010", "format": "json"}}}]
    },
    {
      "id": "sdr-http-json",
      "addr": {"host": "0.0.0.0", "port": 8090},
      "match": [{
        "and": [{"host": {"equals": "127.0.0.1"}}],
        "pool": {"type": "roundRobin"},
        "discover": {"exec": {"command": "cat", "args": ["./src/test/resources/sdr-hosts.json"], "format": "json"}},
        "healthCheck": {"exec": {"command": "nc", "args": ["-z", "-v"]}}
      }]
    },
    {
      "id": "https-txt",
      "addr": {"host":"0.0.0.0", "port": 8443},
      "tls": {
        "certPath": "./src/test/resources/certs/awe4lb.pem",
        "keyPath": "./src/test/resources/certs/awe4lb.key",
        "ciphers": ["TLS_AES_128_GCM_SHA256"]
      },
      "match": [
        {
          "and": [{"sni": {"equals": "momo.localhost"}}],
          "discover": {"http": {"endpoint": "http://127.0.0.1:4011", "format": "text"}}
        },
        {
          "and": [{"sni": {"equals": "sdr.localhost"}}],
          "pool": {"type": "weight"},
          "discover": {"exec": {"command": "cat", "args": ["./src/test/resources/sdr-hosts.txt"], "format": "text"}}
        }
      ]
    }
  ]
}
