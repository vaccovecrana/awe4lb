{
  "api": {
    "enabled": true,
    "bind": "0.0.0.0:8888"
  },
  "metrics": {
    "enabled": true,
    "bind": "0.0.0.0:9284"
  },
  "servers": {
    "vacco-tls": {
      "host":"0.0.0.0", "port": 443,
      "tls": {
        "cert_path": "/etc/gobetween/cert-chain.pem",
        "key_path": "/etc/gobetween/cert-key.pem",
        "min_version": "tls1.3",
        "prefer_server_ciphers": false,
        "session_tickets": true
      },
      "match": [
        {
          "and": [
            {"sni": {"equals": "sso.vacco.li"}},
            {"address": {"equals": "172.16.0.1"}}
          ],
          "balance": {
            "static": [
              {"host": "us-east-00-vault-test-00.lan", "port": 8200}
            ]
          }
        },
        {
          "and": [{"sni": {"equals": "sso.vacco.li"}}],
          "balance": {
            "type": "weight",
            "static": [
              {"host": "us-east-00-vault-00.lan", "port": 8200, "weight": 2, "priority": 1},
              {"host": "us-east-00-vault-01.lan", "port": 8200, "weight": 1, "priority": 1},
              {"host": "us-east-00-vault-02.lan", "port": 8200, "weight": 1, "priority": 2}
            ]
          }
        },
        {
          "and": [{"sni": {"equals": "ci.vacco.li"}}],
          "balance": {
            "type": "roundrobin",
            "static": [
              {"host": "us-east-00-vault-test-00.lan", "port": 8200},
              {"host": "us-east-00-vault-test-01.lan", "port": 8200}
            ]
          }
        }
      ],
      "healthcheck": {
        "kind": "ping",
        "interval": "5s",
        "ping_timeout_duration": "3000ms"
      }
    },
    "vacco-ssh": {
      "host": "0.0.0.0", "port": 22,
      "match": [
        {
          "balance": {
            "static": [
              {"host": "us-east-00-git-00.lan", "port": 22}
            ]
          }
        }
      ],
      "healthcheck": {
        "kind": "ping",
        "interval": "5s",
        "ping_timeout_duration": "3000ms"
      }
    },
    "k0s-kube-api": {
      "host": "0.0.0.0", "port": 6443,
      "match": [
        {
          "balance": {
            "type": "leastconn",
            "static": [
              {"host": "us-east-00-k8s-prd-cnt-00.lan", "port": 6443},
              {"host": "us-east-00-k8s-prd-cnt-01.lan", "port": 6443},
              {"host": "us-east-00-k8s-prd-cnt-02.lan", "port": 6443}
            ]
          }
        }
      ],
      "healthcheck": {
        "interval": "1s",
        "kind": "ping",
        "ping_timeout_duration": "500ms"
      }
    }
  }
}
